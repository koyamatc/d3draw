<!DOCTYPE html>
<html lang="jp">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width,initial-scale=1" />
  	<meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />

	<title>d3Draw Development</title>
  	<link href="css/bootstrapx.css" rel="stylesheet">
	<link href="css/jklmain.css" rel="stylesheet">
	<link href="css/sons-of-obsidian.css" rel="stylesheet">

</head>
<body>
	
	<div class="container">
	 <h2>d3.js でＳＶＧを描画する機能を関数化してみました。
	 	<a href="">d3draws.js</a>
	 </h2>

		<h3>
		何度も同じことを書くのが面倒なので。
		</h3>

		<h2>
		 直線 描画関数　drawLine(svg,data)
		</h2>
		<div class="row">
			<div class="col-sm-5">
				<div id="svg01"></div>
			</div>	
			<div class="col-sm-7">
<pre>
var lineData01 = [
{"x1":100,"y1":50,"x2":300,"y2":50},
{"x1":100,"y1":80,"x2":300,"y2":80,"stroke":"#f00","strokeWidth":5},
{"x1":0,"y1":0,"x2":1,"y2":0,"stroke":"#ff0","strokeWidth":15,
"xScale":xScale01,"yScale":yScale01}
];		

drawLine(svg01,lineData01);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 ベクトル 描画関数（角度と長さ）　drawVectorA(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg02"></div>
			</div>
			<div class="col-sm-7">
<pre>
var vecData02 = [
{"x1":0,"y1":0.8,"angles":-45,"length":1,"stroke":"#f0f","strokeWidth":4,"xScale":xScale01,"yScale":yScale01},
{"x1":1,"y1":0.5,"angles":210,"length":1,"stroke":"#ff0","strokeWidth":5,"xScale":xScale01,"yScale":yScale01}
];		

drawVectorA(svg02,vecData02);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 ベクトル 描画関数（2点間)　drawVectorB(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg03"></div>
			</div>
			<div class="col-sm-7">
<pre>
var vecData03 = [
{"x1":0,"y1":0.8,"x2":1,"y2":0.8,"stroke":"#00f","strokeWidth":4,"xScale":xScale01,"yScale":yScale01},
{"x1":1,"y1":0.3,"x2":0.5,"y2":0.3,"stroke":"#0ff","strokeWidth":5,"xScale":xScale01,"yScale":yScale01}
];		

drawVectorB(svg03,vecData03);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 ベクトル 描画関数（2点間 両方向矢印)　drawVectorW(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg04"></div>
			</div>
			<div class="col-sm-7">
<pre>
var vecData04 = [
{"x1":0,"y1":0.8,"x2":1,"y2":0.8,"stroke":"#ff0","strokeWidth":4,"xScale":xScale01,"yScale":yScale01},
{"x1":1,"y1":0.3,"x2":0.5,"y2":0.3,"stroke":"#fff","strokeWidth":2,"xScale":xScale01,"yScale":yScale01}
];		

drawVectorW(svg04,vecData04);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 円　描画関数　drawCircle(svg,data)
		</h2>
		<div class="row">
			<div class="col-sm-5">
				<div id="svg05"></div>
			</div>
			<div class="col-sm-7">
<pre>
circleData05 = [
{"cx":0.5,"cy":0.5,"r":95,"stroke":"#ff0",
	"xScale":xScale01,"yScale":yScale01},
{"cx":0.5,"cy":0.5,"r":30,"stroke":"#ff0","fillColor":"#f00",
	"xScale":xScale01,"yScale":yScale01},
{"cx":0.2,"cy":0.2,"r":15,"stroke":"#f00","fillColor":"#00f",
	"xScale":xScale01,"yScale":yScale01},
{"cx":0.9,"cy":0.8,"r":60,"stroke":"#0f0","strokeWidth":5,
	"xScale":xScale01,"yScale":yScale01}
];

drawCircle(svg05,circleData05);
</pre>
			</div>
		</div><!-- / row -->
		<h2>
		 円弧　描画関数　drawArc(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg06"></div>
			</div>
			<div class="col-sm-7">
<pre>
var arcData06 = [
{"startPos":90,"endPos":180,"innerRadius":120,"outerRadius":110,
 "stroke":"#fff"},
{"startPos":90,"endPos":0,"innerRadius":100,"outerRadius":100,
	"xScale":xScale01,"yScale":yScale01},
{"startPos":120,"endPos":0,"innerRadius":50,"outerRadius":70,
 "stroke":"#f00","strokeWidth":4,
 "xTranslate":0.5,"yTranslate":0, 
 "xScale":xScale01,"yScale":yScale01},	
 {"startPos":90,"endPos":-30,"innerRadius":20,"outerRadius":100,
 "stroke":"#00f","strokeWidth":3,"fillColor":"#ff0",
 "xTranslate":0.8,"yTranslate":0.2, 
 "xScale":xScale01,"yScale":yScale01}
];	

drawArc(svg06,arcData06);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 楕円　描画関数　drawEllipse(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg07"></div>
			</div>
			<div class="col-sm-7">
<pre>
ellipseData07 = [
{"cx":0.4,"cy":0.7,"xScale":xScale01,"yScale":yScale01},
{"cx":0.8,"cy":0.3,"rx":50,"ry":80,"stroke":"#f00","fillColor":"#ff0",
 "xScale":xScale01,"yScale":yScale01},
{"cx":0.2,"cy":1.5,"rx":40,"ry":60,"stroke":"#f00","fillColor":"#00f",
 "rAngle":45,"xScale":xScale01,"yScale":yScale01} 
];

drawEllipse(svg07,ellipseData07);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 長方形　描画関数　drawRectangle(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg08"></div>
			</div>
			<div class="col-sm-7">
<pre>
rectData08 = [
{"x":0.3,"y":0.9,"width":200,"height":90,"stroke":"lime" ,"xScale":xScale01,"yScale":yScale01},
{"x":0.6,"y":0.5,"width":50,"height":80,"stroke":"#f00","fillColor":"#ff0",
 "xScale":xScale01,"yScale":yScale01},
{"x":0.2,"y":1.5,"width":40,"height":60,"stroke":"#f00","fillColor":"#00f",
 "rAngle":45,"xScale":xScale01,"yScale":yScale01} 
];

drawRect(svg08,rectData08);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 直角三角形　描画関数　drawRightTri(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg09"></div>
			</div>
			<div class="col-sm-7">
<pre>
var triangleData09 = [
{"x1":50,"y1":30,"angle":15,"adjacent":200,"theta":30,"stroke":"#f00",
 "strokeWidth":4,"xScale":xScale02,"yScale":yScale02},
 {"x1":350,"y1":130,"angle":190,"adjacent":150,"theta":25,"stroke":"#ff0","strokeWidth":4,"xScale":xScale02,"yScale":yScale02}
];

drawRTriangle(svg09,triangleData09);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 多角形　描画関数　drawPolygon(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg10"></div>
			</div>
			<div class="col-sm-7">
<pre>
var polyData10 = [
{"cx":100,"cy":80,"r":50,"sides":3,"start":90,
 "stroke":"#ff0",
 "xScale":xScale02,"yScale":yScale02},
{"cx":100,"cy":80,"r":50,"sides":3,"start":-90,
 "stroke":"#ff0",
 "xScale":xScale02,"yScale":yScale02},
{"cx":220,"cy":90,"r":70,"sides":8,"start":0,
 "stroke":"#0f0","fillColor":c10(5),
 "xScale":xScale02,"yScale":yScale02},
{"cx":330,"cy":60,"r":60,"sides":5,"start":180,
 "stroke":"#00f","strokeWidth":5,"fillColor":c10(7),
 "xScale":xScale02,"yScale":yScale02}
];

drawPolygon(svg10,polyData10);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 文字　描画関数　drawText(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg11"></div>
			</div>
			<div class="col-sm-7">
<pre>
var textData11 = [
{"x":100,"y":150,"text":"anchor start","anchor":"start","stroke":"#ff0","fontSize":18,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02},
{"x":100,"y":100,"text":"anchor middle","anchor":"middle","stroke":"#ff0","fontSize":18,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02},
{"x":100,"y":50,"text":"anchor end","anchor":"end","stroke":"#ff0",
"fontSize":18,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02},
{"x":250,"y":200,"text":"rotate 30","rAngle":30,"stroke":"#ff0","fillColor":"#f00",
"fontSize":36,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02}
];

drawText(svg11,textData11);
</pre>
			</div>
		</div><!-- / row -->

		<h2>
		 Mathjax　描画関数　drawMathjax(svg,data)
		</h2>	
		<div class="row">
			<div class="col-sm-5">
				<div id="svg12"></div>
			</div>
			<div class="col-sm-7">
<pre>
var mathData12 = [
{"x":100,"y":200,"text":"$$ax^2+bx+c=0$$","xScale":xScale02,"yScale":yScale02,"fontSize":16},
{"x":100,"y":150,"text":"$$x=\\frac{-b\\pm\\sqrt{ b^2-4ac }}{2a}$$","xScale":xScale02,"yScale":yScale02,"fontSize":16}
];
  	
drawMathjax(svg12,mathData12);
</pre>
			</div>
		</div><!-- / row -->

	</div><!-- / container -->

	<script src="js/jquery.js" charset="utf-8"></script>
	<script src="js/bootstrap.js" charset="utf-8"></script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="js/prettify.js" charset="utf-8"></script>
	<script src="js/d3draws.js" charset="utf-8"></script>
	
	<script type="text/javascript">
!function ($) {

  $(function(){

    var $window = $(window)

    // make code pretty
    window.prettyPrint && prettyPrint()

     
  })

}(window.jQuery)

$(document).on('ready',function(){
  $('pre').addClass('prettyprint');
  $('pre').css('font-size',16);
  prettyPrint();

});

		var c10 = d3.scale.category10();
		
		var height = 200;
		var width  = 400;

		// svg container 
		var svg01 = d3.select("#svg01")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg02 = d3.select("#svg02")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg03 = d3.select("#svg03")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg04 = d3.select("#svg04")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg05 = d3.select("#svg05")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg06 = d3.select("#svg06")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg07 = d3.select("#svg07")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg08 = d3.select("#svg08")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg09 = d3.select("#svg09")
				.append("svg")
				.attr("class","svg1");
		// svg container 

		var svg10 = d3.select("#svg10")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg11 = d3.select("#svg11")
				.append("svg")
				.attr("class","svg1");

		// svg container 
		var svg12 = d3.select("#svg12")
				.append("svg")
				.attr("class","svg1");

		d3.selectAll(".svg1")		
				.attr("height",height)
				.attr("width",width)
				.style("background","#666");
		
		// scale definition
		var xScale01 = d3.scale.linear()
                       .domain([0,1])
                       .range([50,350]);
  
  		var yScale01 = d3.scale.linear()
                       .domain([0,1])
                       .range([150,50]);       		

		var lineData01 = [
			{"x1":100,"y1":50,"x2":300,"y2":50},
			{"x1":100,"y1":80,"x2":300,"y2":80,"stroke":"#f00","strokeWidth":5},
			{"x1":0,"y1":0,"x2":1,"y2":0,"stroke":"#ff0","strokeWidth":15,
			"xScale":xScale01,"yScale":yScale01}
		];		
		drawLine(svg01,lineData01);

		var vecData02 = [
			{"x1":0,"y1":0.8,"angles":-45,"length":1,"stroke":"#f0f","strokeWidth":4,
			"xScale":xScale01,"yScale":yScale01},
			{"x1":1,"y1":0.5,"angles":210,"length":1,"stroke":"#ff0","strokeWidth":5,
			"xScale":xScale01,"yScale":yScale01}
		];		

		 drawVectorA(svg02,vecData02);


		var vecData03 = [
			{"x1":0,"y1":0.8,"x2":1,"y2":0.8,"stroke":"#00f","strokeWidth":4,
			"xScale":xScale01,"yScale":yScale01},
			{"x1":1,"y1":0.3,"x2":0.5,"y2":0.3,"stroke":"#0ff","strokeWidth":5,
			"xScale":xScale01,"yScale":yScale01}
		];		

		 drawVectorB(svg03,vecData03);

		var vecData04 = [
			{"x1":0,"y1":0.8,"x2":1,"y2":0.8,"stroke":"#ff0","strokeWidth":4,
			"xScale":xScale01,"yScale":yScale01},
			{"x1":1,"y1":0.3,"x2":0.5,"y2":0.3,"stroke":"#fff","strokeWidth":2,
			"xScale":xScale01,"yScale":yScale01}
		];		

		 drawVectorW(svg04,vecData04);
  
		// drawCircle(svg05,data)
		circleData05 = [
			{"cx":0.5,"cy":0.5,"r":95,"stroke":"#ff0",
			"xScale":xScale01,"yScale":yScale01},
			{"cx":0.5,"cy":0.5,"r":30,"stroke":"#ff0","fillColor":"#f00",
			"xScale":xScale01,"yScale":yScale01},
			{"cx":0.2,"cy":0.2,"r":15,"stroke":"#f00","fillColor":"#00f",
			"xScale":xScale01,"yScale":yScale01},
			{"cx":0.9,"cy":0.8,"r":60,"stroke":"#0f0","strokeWidth":5,
			"xScale":xScale01,"yScale":yScale01}

		];

		drawCircle(svg05,circleData05);

  	//drawArc
  	var arcData06 = [
  		{"startPos":90,"endPos":180,"innerRadius":120,"outerRadius":110,
  		"stroke":"#fff"},
  		{"startPos":90,"endPos":0,"innerRadius":100,"outerRadius":100,
  			"xScale":xScale01,"yScale":yScale01},
  		{"startPos":120,"endPos":0,"innerRadius":50,"outerRadius":70,
  		 "stroke":"#f00","strokeWidth":4,
  		 "xTranslate":0.5,"yTranslate":0, 
  			"xScale":xScale01,"yScale":yScale01},	
  		{"startPos":90,"endPos":-30,"innerRadius":20,"outerRadius":100,
  		 "stroke":"#00f","strokeWidth":3,"fillColor":"#ff0",
  		 "xTranslate":0.8,"yTranslate":0.2, 
  			"xScale":xScale01,"yScale":yScale01}

  	];	

  	drawArc(svg06,arcData06);

  	// 楕円形
  	ellipseData07 = [
  		{"cx":0.4,"cy":0.7,"xScale":xScale01,"yScale":yScale01},
  		{"cx":0.8,"cy":0.3,"rx":50,"ry":80,"stroke":"#f00","fillColor":"#ff0",
  		 "xScale":xScale01,"yScale":yScale01},
  		{"cx":0.2,"cy":1.5,"rx":40,"ry":60,"stroke":"#f00","fillColor":"#00f",
  		 "rAngle":45,"xScale":xScale01,"yScale":yScale01} 
  	];

  	drawEllipse(svg07,ellipseData07);

  	// 長方形
  	rectData08 = [
  		{"x":0.3,"y":0.9,"width":200,"height":90,"stroke":"lime" ,"xScale":xScale01,"yScale":yScale01},
  		{"x":0.6,"y":0.5,"width":50,"height":80,"stroke":"#f00","fillColor":"#ff0",
  		 "xScale":xScale01,"yScale":yScale01},
  		{"x":0.2,"y":1.5,"width":40,"height":60,"stroke":"#f00","fillColor":"#00f",
  		 "rAngle":45,"xScale":xScale01,"yScale":yScale01} 
  	];

  	drawRect(svg08,rectData08);

		// scale definition
		var xScale02 = d3.scale.linear()
                       .domain([50,350])
                       .range([50,350]);
  
  		var yScale02 = d3.scale.linear()
                       .domain([50,150])
                       .range([150,50]);       		

  	/* 直角三角形 */
  	var triangleData09 = [
  	  {"x1":50,"y1":30,"angle":15,"adjacent":200,"theta":30,"stroke":"#f00",
  		"strokeWidth":4,"xScale":xScale02,"yScale":yScale02},
  	  {"x1":350,"y1":130,"angle":190,"adjacent":150,"theta":25,"stroke":"#ff0","strokeWidth":4,"xScale":xScale02,"yScale":yScale02}

  	];
  	drawRTriangle(svg09,triangleData09);

  	/** ポリゴン　*/
 		var polyData10 = [
 			{"cx":100,"cy":80,"r":50,"sides":3,"start":90,
 			"stroke":"#ff0",
 			"xScale":xScale02,"yScale":yScale02},
 			{"cx":100,"cy":80,"r":50,"sides":3,"start":-90,
 			"stroke":"#ff0",
 			"xScale":xScale02,"yScale":yScale02},
 			{"cx":220,"cy":90,"r":70,"sides":8,"start":0,
 			"stroke":"#0f0","fillColor":c10(5),
 			"xScale":xScale02,"yScale":yScale02},
 			{"cx":330,"cy":60,"r":60,"sides":5,"start":180,
 			"stroke":"#00f","strokeWidth":5,"fillColor":c10(7),
 			"xScale":xScale02,"yScale":yScale02}

 		];

 		drawPolygon(svg10,polyData10);


  	/* テキスト */
  	var textData11 = [
  	  {"x":100,"y":150,"text":"anchor start","anchor":"start","stroke":"#ff0","fontSize":18,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02},
  	  {"x":100,"y":100,"text":"anchor middle","anchor":"middle","stroke":"#ff0","fontSize":18,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02},
  	  {"x":100,"y":50,"text":"anchor end","anchor":"end","stroke":"#ff0",
  		"fontSize":18,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02},
  	  {"x":250,"y":200,"text":"rotate 30","rAngle":30,"stroke":"#ff0","fillColor":"#f00",
  		"fontSize":36,"strokeWidth":2,"xScale":xScale02,"yScale":yScale02}
  	];

  	var circleData11 = [
  		{"cx":100,"cy":140,"r":10,"stroke":"#fff","fillColor":c10(0),"stroke-width":4,"xScale":xScale02,"yScale":yScale02},
  		{"cx":100,"cy":90,"r":10,"stroke":"#fff","fillColor":c10(1),"stroke-width":4,"xScale":xScale02,"yScale":yScale02},
  		{"cx":100,"cy":40,"r":10,"stroke":"#fff","fillColor":c10(2),"stroke-width":4,"xScale":xScale02,"yScale":yScale02}
  	];
  	drawText(svg11,textData11);
  	drawCircle(svg11,circleData11);

  	/** draw mathjax */
  	var mathData12 = [
  		{"x":100,"y":200,"text":"$$ax^2+bx+c=0$$","xScale":xScale02,"yScale":yScale02,"fontSize":16},
  		{"x":100,"y":150,"text":"$$x=\\frac{-b\\pm\\sqrt{ b^2-4ac }}{2a}$$","xScale":xScale02,"yScale":yScale02,"fontSize":16}

  	];
  	
  	drawMathjax(svg12,mathData12);

	</script>
</body>
</html>
